// Objs v.1.1, Roman Torshin, Apache 2.0 licence
(function(globals) {
	'use strict';
	function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function e(){};return{s:i,n:function t(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function e(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function t(){r=r.call(e)},n:function e(){var t=r.next();return s=t.done,t},e:function e(t){l=!0,a=t},f:function e(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var o=e=>{var t,r={els:[],ie:{}},n=0,i=1,a=2,s=3,l="object",c="function",d="dangerouslySetInnerHTML",f=document,u=-1,p=0,y=0,g=[],h=0,v=0,m=e=>typeof e,S=(e,t)=>{for(var r in e)Object.hasOwnProperty.call(e,r)&&t(r,e)},b=o.onError||(()=>{}),L=e=>(...l)=>{try{var c=e(l[n],l[i],l[a],l[s]);return c!==t?c:r}catch(d){b(d)}},E=e=>{for(h=p;h<=u;h++)e()},C=e=>(m(e)!==l&&(e=o.first(e).el),e),F=(e=!0,a=r.els)=>{var s=a.length;r.length=s,u=s-i,p=n,r.el=s?a[n]:t,r.last=s?a[u]:t,e&&(S(g,(e,t)=>{delete r[t[e]]}),g=[],r.ie={})},I=(e="")=>Array.from(f.querySelectorAll(e));r.reset=o;var $=(e,r,i)=>{S(r,a=>{var s=r[a];m(s)===c&&(s=s(i)),"append"===a&&m(s)===l&&(s.els&&(s=[s]),s[n]&&s[n].els&&(valueBuff=[],S(s,e=>{valueBuff.push(...s[e].els)}),s=valueBuff)),s!==t&&(["tag","sample","state"].includes(a)||(["html","innerHTML"].includes(a)?e.innerHTML=s:"dataset"===a&&m(s)===l?S(s,t=>{e.dataset[t]=s[t]}):"toggleClass"===a?e.classList.toggle(s):"addClass"===a?m(s)===l?e.classList.add(...s):e.classList.add(s):"removeClass"===a?e.classList.remove(s):"style"===a&&m(s)===l?S(s,t=>{e.style[t]=s[t]}):"append"===a&&m(s)===l?S(s.length?s:[s],t=>{e.appendChild(s[t])}):e.setAttribute(a,s)))}),e.dataset.oState=r.state};return r.init=L(e=>{var a=r.initID||o.inits.length||n;r.initID=a,F(),o.inits[r.initID]=r,(m(e)!==l||e.render===t)&&(e={render:e}),S(e,s=>{g.push(s),r[s]=L((d=[{}])=>{var y=e[s]||{tag:"div"},g=r.els.slice(p,u+i);m(y)===l&&(y.state=s,y["data-o-init"]=a);var S=(e,t={})=>m(y)===l?f.createElement(y.tag||"div"):((h=f.createElement("div")).innerHTML=m(y)===c?y(t):y,h.children.length>i||!h.firstElementChild)?(h.dataset.oInit=e,h):(h.firstElementChild.dataset.oInit=e,h.firstElementChild);d.length||(d=[d]);var b=!g[n]&&"render"===s;d=d.map((e,n)=>(e.self=r,e.o=o,e.i=e.i===t?n:e.i,b&&g.push(S(a,e)),e)),b&&(r.els=g,F(!1)),g&&(v=g.length===d.length,g.map((e,t)=>{d[v?t:n].i=t+p;var r=m(y)===c?y(d[v?t:n]):y;m(r)===l&&$(e,r,d[v?t:n])}))})})}),r.initState=L((e,t)=>{r.init(e).render(t)}),r.sample=L((e="render")=>{var t,i=r.els[p].attributes,a=r.els[p].dataset,s={tag:r.els[p].tagName,html:r.els[p].innerHTML,dataset:{}},l=_createForOfIteratorHelper(i);try{for(l.s();!(t=l.n()).done;){var c=t.value;"data-"!==c.nodeName.substring(n,5)&&(s[c.nodeName]=c.value)}}catch(d){l.e(d)}finally{l.f()}return S(a,e=>{s.dataset[e]=a[e]}),{[e]:s}}),r.select=L(e=>{e===t&&(e=r.length-i),u=e,p=e,r.el=r.els[e],y=i}),r.all=L(()=>{u=r.length-i,p=n,r.el=r.els[n],y=n}),r.remove=L(e=>{e===t&&y&&(e=p),e!==t?r.els[e].parentNode.removeChild(r.els[e]):E(()=>{r.els[h].parentNode.removeChild(r.els[h])}),F(!1)}),r.skip=L(e=>{e===t&&(e=p),r.els.splice(h,i),F()}),r.add=L((e,i)=>{"string"===m(e)&&""!==e?r.els.push(...I(e)):m(e)===l?e.tagName?r.els.push(e):e.els?r.els.push(...e.els):e.length&&e[n].tagName&&r.els.push(...e):"number"===m(e)&&o.inits[e]&&(r=o.inits[e]),F(!1),r.initID!==t&&r.dataset({oInit:r.initID})}),r.appendInside=L(e=>{E(()=>{C(e).appendChild(r.els[h])})}),r.appendBefore=L(e=>{E(()=>{C(e).parentNode.insertBefore(r.els[h],C(e))})}),r.appendAfter=L(e=>{E(()=>{C(e).after(...r.els)})}),r.find=L((e="")=>{var t=[];return E(()=>{t.push(...Array.from(r.els[h].querySelectorAll(":scope "+e)))}),o(t)}),r.first=L((e="")=>{var n=t,i=[];return E(()=>{(n=r.els[h].querySelector(e))&&i.push(n)}),o(i)}),r.attr=L((e,i)=>{if(e){if(i===t){var a=[];return E(()=>{a[h]=r.els[h].getAttribute(e)}),y?a[n]:a}""!==i?E(()=>{r.els[h].setAttribute(e,i)}):E(()=>{r.els[h].removeAttribute(e)})}}),r.attrs=L(()=>{var e=[];return E(()=>{var t={};[...r.els[h].attributes].forEach(e=>{t[e.nodeName]=e.nodeValue}),e.push(t)}),y?e[n]:e}),r.dataset=L(e=>{if(typeof e===l)E(()=>{S(e,t=>{r.els[h].dataset[t]=e[t]})});else{var t=[];return E(()=>{t.push(_objectSpread({},r.els[h].dataset))}),y?t[n]:t}}),r.style=L(e=>{r.attr("style",e)}),r.css=L((e={})=>{var t="";S(e,r=>{t+=r+":"+e[r].replace('"',"'")+";"}),r.style(t)}),r.setClass=L(e=>{E(()=>{r.els[h].setAttribute("class",e)})}),r.addClass=L(e=>{E(()=>{r.els[h].classList.add(e)})}),r.removeClass=L(e=>{E(()=>{r.els[h].classList.remove(e)})}),r.toggleClass=L((e,t)=>{E(()=>{r.els[h].classList.toggle(e,t)})}),r.haveClass=e=>{var t=!0;return E(()=>{r.els[h].classList.contains(e)||(t=!1)}),t},r.innerHTML=L(e=>{if(e!==t)E(()=>{r.els[h].innerHTML=e});else{var n="";return E(()=>{n+=r.els[h].innerHTML}),n}}),r.innerText=L((e="")=>{E(()=>{r.els[h].innerText=e})}),r.textContent=L((e="")=>{E(()=>{r.els[h].textContent=e})}),r.html=L(e=>{if(e)r.innerHTML(e);else{var t="";return E(()=>{t+=r.els[h].outerHTML}),t}}),r.forEach=L(e=>{E(()=>{e({self:r,i:h,o,el:r.els[h]})})}),r.prepareFor=L((e,t)=>{e.createElement&&(e=e.createElement);var a=()=>r.length===i?e(r.el.tagName.toLowerCase(),_objectSpread(_objectSpread({},r.attrs()[n]),{},{[d]:{__html:r.innerHTML()}})):e("div",{[d]:{__html:r.html()}});return t?class extends t{render(){return a()}}:a()}),r.on=L((e,t,n,i)=>{e.split(", ").forEach(e=>{E(()=>{r.els[h].addEventListener(e,t,n,i)}),r.ie[e]||(r.ie[e]=[]),r.ie[e].push([t,n,i])})}),r.off=L((e,t,i)=>{e.split(", ").forEach(e=>{E(()=>{r.els[h].removeEventListener(e,t,i)}),r.ie[e]&&(r.ie[e]=r.ie[e].filter(e=>e[n]!==t))})}),r.onAll=L((e,t)=>{S(r.ie,(s,l)=>{e&&e!==s||l[s].forEach(e=>{E(()=>{t?r.els[h].removeEventListener(s,e[n]):r.els[h].addEventListener(s,e[n],e[i],e[a])})})})}),r.offAll=L(e=>{r.onAll(e,i)}),e&&r.add(e),r.take=e=>{if(r.add(e),r.el){var a=r.el.dataset.oInit;if(a!==t&&o.inits[a])return r.length===i?(v=r.els[n],Object.assign(r,o.inits[a]),r.els=[v]):r=o.inits[a],F(!1,r.els),r}},r};o.first=e=>o(document.querySelector(e)||""),o.inits=[],o.errors=[],o.showErrors=!1,o.logErrors=()=>{o.errors.length?o.errors.forEach(e=>console.log(e)):console.log("No errors")},o.onError=e=>{o.showErrors?console.log(e):o.errors.push(e)},o.init=e=>o().init(e),o.initState=(e,t)=>o().init(e).render(t),o.take=e=>o().take(e),o.Z=0,o.N=1,o.W=2,o.H=100,o.F=!1,o.C=(e,t)=>Object.hasOwnProperty.call(e,t),o.ajax=(e,t={})=>{var r=new URLSearchParams;if(t.data&&"object"==typeof t.data){for(var n in t.data)o.C(t.data,n)&&("object"==typeof t.data[n]?r.set(n,encodeURIComponent(JSON.stringify(t.data[n]))):r.set(n,t.data[n]));"get"===t.method.toLowerCase()?e+="?"+r.toString():t.body||(t.body=r),delete t.data}return t.headers||(t.headers={"X-Requested-With":"XMLHttpRequest"}),fetch(e,t)},o.get=(e,t={})=>o.ajax(e,_objectSpread(_objectSpread({},t),{},{method:"GET"})),o.post=(e,t={})=>o.ajax(e,_objectSpread(_objectSpread({},t),{},{method:"POST"})),o.getParams=e=>{var t,r={},n=new URLSearchParams(window.location.search).entries(),i=_createForOfIteratorHelper(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;r[a[o.Z]]=a[o.N]}}catch(s){i.e(s)}finally{i.f()}return e?r[e]:r},o.incCache=!0,o.incCacheExp=864e5,o.incTimeout=6e3,o.incSource="",o.incForce=o.F,o.incAsync=!0,o.incCors=o.F,o.incFns={},o.incSet=[o.Z],o.incReady=[o.Z],o.incN=o.Z,o.incCheck=(e=0,t,r=0)=>!r&&e&&t===o.U&&o.incReady[e]?o.incSet[e]===o.N:o.incReady[e]===o.U||o.incReady[e][t]===o.U?o.F:(o.incReady[e][t].loaded=r,o.incFns[o.incReady[e][t].name]=r,o.incReady[e][o.Z]+=r,e&&o.incReady[e].length===o.incReady[e][o.Z]&&("function"==typeof o.incSet[e]&&o.incSet[e](e),o.incSet[e]=o.N),o.incSet[e]===o.N),o.incCacheClear=(e=o.F)=>{for(var t in o.incFns)o.C(o.incFns,t)&&(localStorage.removeItem("inc-"+t),localStorage.removeItem("inc-"+t+"Expires"));return e&&(o.incReady.forEach((e,t)=>{t&&e.forEach((e,r)=>{r&&o("#oInc-"+t+"-"+r).remove()})}),o.incN=o.Z,o.incFns={},o.incSet=[o.Z],o.incReady=[o.Z]),!0},o.inc=(e,t,r)=>{var n=o.Z,i=o.Z,a="function";if("object"!=typeof e||!e)return o.incSet[o.Z];o.incSet[o.Z]++;var s=o.incSet[o.Z];o.incSet[s]=t||o.Z,o.incReady[s]=[];var l=o.incReady[s];l[o.Z]=o.N;var c={},d=function t(r){if(o.C(e,r)){n++,o.incN++;var a=e[r].indexOf(".css")>-1?"style":"script";if(e[r]=(o.incSource?o.incSource+"/":"")+e[r],isNaN(r)&&o.C(o.incFns,r)&&o.incFns[r]&&!o.incForce)return l[n]={name:r,loaded:o.N},i++,1;if(l[n]={name:r,loaded:o.Z},isNaN(r)&&(o.incFns[r]=o.Z),isNaN(r)&&o.incCache&&"http"!==e[r].substring(o.Z,4)&&"file:"!==window.location.protocol&&(e[r].indexOf(".css")>-1||e[r].indexOf(".js")>-1)){var d=localStorage,f=d.getItem("inc-"+r),u=d.getItem("inc-"+r+"Expires");f&&u&&new Date().getTime()<u?(o.initState({tag:a,id:"oInc-"+s+"-"+n,innerHTML:f,"data-o-inc":s}).appendInside("head"),l[n].loaded=o.N,o.incFns[r]=o.N,i++):(c[r]=n,o.get(e[r],{mode:o.incCors?"cors":"same-origin"}).then(t=>{if(200!==t.status){o.onError&&o.onError({message:o.incSource+e[r]+" was not loaded"});return}t.text().then(e=>{d.setItem("inc-"+r,e),d.setItem("inc-"+r+"Expires",new Date().getTime()+o.incCacheExp),o.initState({tag:a,id:"oInc-"+s+"-"+c[r],innerHTML:e,"data-o-inc":s}).appendInside("head"),o.incCheck(s,c[r],o.N)})}))}else{var p={tag:a,id:"oInc-"+s+"-"+n,"data-o-inc":s,async:o.incAsync,onload:"o.incCheck("+s+","+n+",1)"};e[r].indexOf(".css")>-1?(p.tag="link",p.rel="stylesheet",p.href=e[r]):(e[r].indexOf(".js")>-1||(p.tag="img",p.style="display:none;"),p.src=e[r]),o.initState(p).appendInside(p.style?"body":"head")}}};for(var f in e)if(d(f))continue;return l[o.Z]+=i,n!==o.Z&&(i===n?typeof t===a&&t(s):setTimeout(e=>{o.incReady[e]&&o.incReady[e].length<o.incReady[e][o.Z]&&(o.incSet[e]=o.Z,typeof r===a&&r(s))},o.incTimeout,s)),o.incSet[o.Z]},o.tLog=[],o.tRes=[],o.tStatus=[],o.tFns=[],o.tShowOk=o.F,o.tStyled=o.F,o.tTime=2e3,o.tPre='<div style="font-family:monospace;text-align:left;">',o.tOk='<span style="background:#cfc;padding: 0 15px;">OK</span> ',o.tXx='<div style="background:#fcc;padding:3px;">',o.tDc="</div>",o.test=(e="",...t)=>{var r=o.tLog.length,n=0,i="├ OK: ",a="├ ✘ ",s="\n",l="\n",c=t.length,d=o.Z;"function"==typeof t[c-o.N]&&(o.tFns[r]=t[c-o.N],c--),o.tStyled?(o.tLog[r]="<div><b>"+e+" #"+r+"</b></div>",i=o.tPre+o.tOk,a=o.tPre+o.tXx,l=(s=o.tDc)+s):o.tLog[r]=e+" #"+r+"\n",o.tRes[r]=o.F,o.tStatus[r]=[];for(var f=o.Z;f<c;f++){var u={n:r,i:f,title:t[f][o.Z],tShowOk:o.tShowOk,tStyled:o.tStyled},p=t[f][o.N];if("function"==typeof p)try{p=p(u)}catch(y){p=y.message,o.onError&&o.onError(y)}o.tStatus[r][f]="string"==typeof p?o.F:p,!0===p?(d++,o.tShowOk&&(o.tLog[r]+=i+t[f][o.Z]+s)):p!==o.U?o.tLog[r]+=a+t[f][o.Z]+(p!==o.F?": <i>"+p+"</i>":"")+l:(n++,setTimeout(e=>{e.title+=" (timeout)",o.testUpdate(e)},o.tTime,u))}return o.tRes[r]=d===c,o.tStyled?o.tLog[r]+=o.tPre+'<div style="color:'+(d+n!==c?"red":"green")+';"><b>':o.tLog[r]+=n?"├":"└ ",o.tLog[r]+="DONE "+d+"/"+(c-n),n&&(o.tLog[r]+=", waiting: "+n),o.tStyled?o.tLog[r]+="</b>"+o.tDc+o.tDc:o.tLog[r]+="\n",n||"function"!=typeof o.tFns[r]||o.tFns[r](r),r},o.testUpdate=(e,t=o.F,r="")=>{if(o.tStatus[e.n][e.i]===o.U){o.tStatus[e.n][e.i]=!0===t,!0===t?e.tShowOk&&(e.tStyled?o.tLog[e.n]+=o.tPre+o.tOk+e.title+r+o.tDc:o.tLog[e.n]+="└ OK: "+e.title+r+"\n"):(o.tRes[e.n]=o.F,e.tStyled?o.tLog[e.n]+=o.tPre+o.tXx+e.title+r+(t?": "+t:"")+o.tDc+o.tDc:o.tLog[e.n]+="└ ✘ "+e.title+(t?": "+t:"")+r+"\n");var n,i=o.Z,a=i,s=_createForOfIteratorHelper(o.tStatus[e.n]);try{for(s.s();!(n=s.n()).done;){var l=n.value;if(l===o.U)return;!l&&i++,a++}}catch(c){s.e(c)}finally{s.f()}o.tRes[e.n]=!i;var d=i?"FAILED "+i+"/"+a:"DONE "+a+"/"+a;e.tStyled?o.tLog[e.n]+=o.tPre+'<b style="color:'+(i?"red":"green")+';">'+d+"</b>"+o.tDc:o.tLog[e.n]+="└ "+d,"function"==typeof o.tFns[e.n]&&o.tFns[e.n](e.n)}};

	if (typeof module !== 'undefined' && module.exports) {
		o.default = o;
		module.exports = o;
	} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {
		define('o', [], function () {
			return o;
		});
	} else {
		window.o = o;
	}
})(this);
